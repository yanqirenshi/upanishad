# Overview

class: meme の slot のインデックス。

スロットの種類ごとに slot は二種類あります。あ

1. %id のインデックス
   - object 作成時に自動で作成される。
   - key: %id, vlue: meme instance
   - value は meme instance の参照となる。
   - key:value = 1:1 となる。
   - これは root-objects に持つべきだな。
2. %id 以外のインデックス
   - key: %id, vlue: %id
   - key:value = 1:n となる。
   - value は %id の値となり meme instance を直接参照するものではない。

# Objects

## Class Structure

```
        +-------+
        | index |
        |=======|
        +-------+
            |
    +---------------+
    | slot-index    |
    |===============|
    |+ class-symbol |
    |+ slot-symbol  |
    |+ contents     |
    |===============|
    +---------------+
            |
            +-----------------------+
            |                       |
    +----------------+     +----------------+
    | slot-index-1:1 |     | slot-index-1:n |
    |================|     |================|
    |----------------|     |----------------|
    +----------------+     +----------------+
```

## Class Detail

```
                     +--------------------------+
                     | index structure          |
 +---------------+   |==========================|
 | pool          |   |          object          |
 |===============|   |  +-------------+         |
 | index-objects |----->| Hashe table |         |
 |---------------|   |  +-------------+         |
 | index-at      |   |     |             slot   |
 | add-index     |   |     |   +-------------+  |
 | remove-index  |   |     `-->| Hashe table |-----+
 | add-object    |   |         +-------------+  |  |
 | remove-object |   |--------------------------|  |
 +---------------+   +--------------------------+  |
                                                   |
    +----------------------------------------------+
    |
    |   +---------------+    +-------------------------------------------+
    `-->| index         |    | Hash Table : slot-index-1:1               |
        |===============|    |===========================================|
        | object        |    | INDEX                                     |
        | slot          |    | +-----------------+-------------------+   |
        | contents      |-+->| | key: slot-value | value: mememap    |+  |
        |---------------| |  | +-----------------+-------------------+|| |
        | add-object    | |  |  +-----------------+-------------------+| |
        | remove-object | |  |   +-----------------+-------------------+ |
        +---------------+ |  +-------------------------------------------+
                          |
                          |  +-------------------------------------------+
                          |  | Hash Table : slot-index-1:n               |
                          |  |===========================================|
                          |  | INDEX                                     |
                          |  | +-----------------+-------------------+   |
                          `->| | key: slot-value | value: %id-map    |+  |
                             | |                 | +----+--------+   ||| |
                             | |                 | | id | object |+  ||| |
                             | |                 | +----+--------+|+ ||| |
                             | |                 |  +----+--------+| ||| |
                             | |                 |   +----+--------+ ||| |
                             | +-----------------+-------------------+|| |
                             |  +-----------------+-------------------+| |
                             |   +-----------------+-------------------+ |
                             +-------------------------------------------+
```
